@model IEnumerable<TheBookshelf.Web.Models.TagViewModel>

@{
	ViewBag.Title = "Index";
}

<h2>Index</h2>

<p>
	@Html.ActionLink("Create New", "Create")
</p>
<table class="table">
	<tr>
		<th>
			@Html.DisplayNameFor(model => model.Name)
		</th>
		<th></th>
	</tr>

	@foreach (var item in Model)
	{
	<tr>
		<td>
			@Html.DisplayFor(modelItem => item.Name)
		</td>
		<td>
			@Html.ActionLink("Edit", "Edit", new { id = item.Id }) |
			@Html.ActionLink("Details", "Details", new { id = item.Id }) |
			@Html.ActionLink("Delete", "Delete", new { id = item.Id })
		</td>
		<td>		
			<a href="#" data-toggle="modal" data-target="#deleteModal" data-item-id="@item.Id">| Delete</a>			
		</td>
	</tr>
	}

</table>
<div id="deleteModal" class="modal" tabindex="-1" role="dialog">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title">Confirmation</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<p>Are you sure that you want to delete this item.</p>
			</div>
			<div class="modal-footer">
				<form asp-action="Delete" method="post">
					<input name="id" type="hidden" id="confirmItemId" />
					<button type="submit" class="btn btn-primary">Delete</button>
				</form>
				<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>

@section scripts {
	<script>
		$('#deleteModal').on('show.bs.modal', function (event) {
			var button = $(event.relatedTarget);
			var itemId = button.data('item-id');

			var input = $(this).find('#confirmItemId');
			input.attr("value", itemId);
		});
	</script>
}